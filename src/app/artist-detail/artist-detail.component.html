<div class="container">
  <div class="app-bar-bg">
    <div class="button-bg">
      <a class="return">&larr;</a>
    </div>
    <h1 class="Private-ShowCase">Fiche Artiste</h1>
    <div class="vide">
    </div>
  </div>
  <div class="bottom">

    <form [formGroup]="artistForm"><!--(ngSubmit)="handleSubmit()" [formGroup]="artistForm"-->

      <h2>Presentation</h2>
      <div class="presentation">
        <img src="{{artist?.img_url}}" alt="">
        <div class="text">
          <h3>{{artist?.nameArtist}} <img *ngIf="allowedToModify" class="pencil" src="../../assets/mode-edit.svg"
                                          alt="pencil" (click)="openDialog('nameArtist')">
          </h3>
          <div class="abstract">{{artist?.abstract}} <img *ngIf="allowedToModify" class="pencil"
                                                          src="../../assets/mode-edit.svg" alt="pencil"
                                                          (click)="openDialog('abstract')">
          </div>
          <div class="description">{{artist?.descriptionArtist}}</div>
          <img *ngIf="allowedToModify" class="pencil" src="../../assets/mode-edit.svg" alt="pencil"
               (click)="openDialog('descriptionArtist')">
        </div>
      </div>

      <h2>Informations générales</h2>
      <div class="infos">
        <div class="contacts" *ngIf="allowedToModify; else modificationAllowed">
          <mat-form-field class="example-full-width">
            <input matInput type="text" placeholder="Site Web" value="{{artist?.website}}" [formControl]="websiteCtrl">
            <mat-icon matPrefix>alternate_email</mat-icon>
          </mat-form-field>

          <mat-error *ngIf="websiteCtrl.dirty && websiteCtrl.hasError('pattern')">L'url doit être valide</mat-error>
          <mat-form-field class="example-full-width">
            <input matInput type="text" placeholder="Téléphone" value="{{artist?.phoneNb}}" [formControl]="phoneCtrl"
                   [disabled]="!allowedToModify">
            <mat-icon matPreffix>phone</mat-icon>
          </mat-form-field>
          <mat-error *ngIf="phoneCtrl.dirty && phoneCtrl.hasError('pattern')">Le téléphone doit être valide</mat-error>


          <mat-form-field class="example-full-width">
            <input matInput type="email" placeholder="Email" value="{{artist?.mailArtist}}" [formControl]="emailCtrl">
            <mat-icon matPrefix>email</mat-icon>
          </mat-form-field>

          <mat-error *ngIf="emailCtrl.dirty && emailCtrl.hasError('email')">L'email doit être valide</mat-error>

        </div>
        <ng-template #modificationAllowed>
          <div class="contacts noInput">
            <div class="fields">
              <mat-icon>alternate_email</mat-icon>
              {{artist?.website}}
            </div>
            <div class="fields">
              <mat-icon>phone</mat-icon>
              {{artist?.phoneNb}}
            </div>
            <div class="fields">
              <mat-icon>email</mat-icon>
              {{artist?.mailArtist}}
            </div>
          </div>
        </ng-template>
        <div class="location">
          <app-location-chips [counties]="artist.counties"></app-location-chips>
        </div>
        <span *ngIf="allowedToModify">
        <button mat-button class="button-bg-vert" mat-button (click)="handleSubmit()">Sauvegarder</button>
      </span>
      </div>

    </form>

  </div>
</div>
